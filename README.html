<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

</head>

<body>

<h1>skidder</h1>

<p>ClojureScript drag and drop library.</p>

<h2>Documentation</h2>

<p><code>skidder</code> is a system that you can start, stop and listen for changes</p>

<p>```clojure</p>

<p>(ns test.app
  (:require
   [skidder.core :as skidder]))</p>

<p>(skidder/start! :html5)</p>

<p>```</p>

<p>When skidder starts it adds some (required) event listeners. Those listeners will be
removed when the system stops</p>

<p>```clojure</p>

<p>(skidder/stop!)</p>

<p>```</p>

<p>skidder is built around <a href="src/skidder/protocols.cljs">protocols</a>. The most important
protocols are <code>DragSource</code>, <code>DropTarget</code>, <code>StateInfo</code> and <code>Connector</code>.</p>

<h3>Drag Source</h3>

<p>A drag source is anything that can be dragged (usually a DOM node). Implementors of
the <code>DragSource</code> protocol will have to implement the following functions</p>

<p><code>clojure
(ds-type [this] "Return the type of this drag source.")
(can-drag? [this state-info ds-id] "Return whether this drag source can be dragged.")
(on-begin-drag [this state-info ds-id] "Called when the drag begins. The returned value will be available at the drop result.")
(on-end-drag [this state-info ds-id] "Called when the drag ends.")
</code></p>

<p>NOTES:
0. <code>ds-type</code> - Will be checked against a drop target's <code>accepts</code> set
1. <code>can-drag?</code> - If this function returns <code>false</code> then the element will not be dragged.
2. <code>on-begin-drag</code> - Because its return value will be available when its dropped on a target, you
    should return drag source data that you might need to execute some action on drop.</p>

<h3>Drop Target</h3>

<p>A drop target is anything that can accept a drag source element (usually a DOM node). Implementors
of the <code>DropTarget</code> protocol will have to implement the following functions</p>

<p><code>clojure
(exclusive? [this] "Return whether this drop target should be treated as an exclusive one.")
(accepts [this] "Return a set of drag source types that this drop target accepts.")
(can-drop? [this state-info ds-id dt-id] "Return whether a drop can happen on this drop target.")
(on-hover [this state-info dt-id] "Called when a hover happens on this drop target.")
(on-enter [this state-info dt-id] "Called when an enter happens on this drop target.")
(on-leave [this state-info dt-id] "Called when a leave happens on this drop target.")
(on-drop [this state-info ds-id dt-id] "Called when a drop happens on this drop target.")
</code></p>

<p>NOTES:
0. <code>exclusive</code> - If an exclusive drop target is contained inside another drop target then the drop will
happen only on this drop target
1. <code>on-hover</code> - This will be called very often when above a target so don't do anything expensive in there</p>

<h3>State Information</h3>

<p>When a skidder system starts it holds information about all kinds of things like which
drag sources are registered, which drop targets are registered, is a dragging operation in progress?,
is it hovering over some drop target? etc. To see what queries are available for the state information
you can refer to the <code>StateInfo</code> protocol. One can get the state information from skidder
(assuming that the system has started)</p>

<p><code>clojure
(skidder/state-info)
</code></p>

<p>also the state information is provided as an argument to all the <code>DragSource</code> and <code>DropTarget</code> protocol
functions.</p>

<h3>Connector</h3>

<p>The connector is used to bind a drag source or a drop target to a DOM element </p>

<h2>License</h2>

<p>Copyright Â© 2020 Gerasimos</p>

<p>This program and the accompanying materials are made available under the
terms of the Eclipse Public License 2.0 which is available at
http://www.eclipse.org/legal/epl-2.0.</p>

<p>This Source Code may also be made available under the following Secondary
Licenses when the conditions for such availability set forth in the Eclipse
Public License, v. 2.0 are satisfied: GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or (at your
option) any later version, with the GNU Classpath Exception which is available
at https://www.gnu.org/software/classpath/license.html.</p>

</body>
</html>
